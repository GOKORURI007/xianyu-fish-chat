/**
 * NoSSR ç»„ä»¶
 *
 * ğŸ“Œ ç”¨é€”ï¼š
 * - ç¦ç”¨æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰ï¼Œç¡®ä¿ç»„ä»¶å†…å®¹ä»…åœ¨å®¢æˆ·ç«¯æ¸²æŸ“
 * - é€‚ç”¨äºä¾èµ–æµè§ˆå™¨ APIï¼ˆå¦‚ windowã€localStorageï¼‰æˆ–å®¢æˆ·ç«¯çŠ¶æ€çš„ç»„ä»¶
 *
 * ğŸ§  è®¾è®¡æ€è·¯ï¼š
 * - React çš„ SSR ä¼šåœ¨æœåŠ¡ç«¯é¢„æ¸²æŸ“ç»„ä»¶å¹¶å°† HTML å‘é€ç»™å®¢æˆ·ç«¯ï¼Œéšåå®¢æˆ·ç«¯è¿›è¡Œ hydrationï¼ˆç»‘å®šäº‹ä»¶ç­‰ï¼‰
 * - å¦‚æœç»„ä»¶åœ¨æœåŠ¡ç«¯æ‰§è¡Œæ—¶è®¿é—®äº†æµè§ˆå™¨ API æˆ–ç”Ÿæˆäº†ä¸ç¨³å®šçš„å†…å®¹ï¼ˆå¦‚ Math.randomï¼‰ï¼Œå°±ä¼šå¯¼è‡´ hydration mismatch é”™è¯¯
 * - ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬é€šè¿‡ `useEffect` è®¾ç½®ä¸€ä¸ª `mounted` çŠ¶æ€ï¼Œç¡®ä¿ç»„ä»¶å†…å®¹åªåœ¨å®¢æˆ·ç«¯æŒ‚è½½åæ‰æ¸²æŸ“
 * - `useEffect` æ˜¯ React çš„å‰¯ä½œç”¨é’©å­ï¼Œåªåœ¨å®¢æˆ·ç«¯æ‰§è¡Œï¼Œå› æ­¤ `mounted` åˆå§‹ä¸º `false`ï¼ŒæœåŠ¡ç«¯æ¸²æŸ“æ—¶è¿”å› `null`
 * - å®¢æˆ·ç«¯æŒ‚è½½å `mounted` å˜ä¸º `true`ï¼Œç»„ä»¶æ‰çœŸæ­£æ¸²æŸ“å…¶å­å†…å®¹ï¼Œä»è€Œå®ç°â€œè·³è¿‡ SSRâ€çš„æ•ˆæœ
 *
 * âœ… æ•ˆæœï¼š
 * - æœåŠ¡ç«¯æ¸²æŸ“æ—¶ç»„ä»¶è¿”å› `null`ï¼Œä¸ä¼šè¾“å‡ºä»»ä½• HTML
 * - å®¢æˆ·ç«¯ hydration å®Œæˆåå†æ¸²æŸ“çœŸå®å†…å®¹ï¼Œé¿å… SSR mismatch
 * - ä¿è¯ç»„ä»¶è¡Œä¸ºä¸æµè§ˆå™¨ç¯å¢ƒä¸€è‡´ï¼Œé€‚åˆåŠ¨æ€æ¸²æŸ“æˆ–ä¾èµ–å®¢æˆ·ç«¯çŠ¶æ€çš„åœºæ™¯
 */

'use client' // æ ‡è®°ä¸ºå®¢æˆ·ç«¯ç»„ä»¶ï¼Œä»…åœ¨å®¢æˆ·ç«¯æ¸²æŸ“
import React, { useEffect, useState } from 'react'


/**
 * éæœåŠ¡ç«¯æ¸²æŸ“ç»„ä»¶
 * @param children - éœ€è¦å»¶è¿Ÿæ¸²æŸ“çš„å­ç»„ä»¶
 * @returns å½“ç»„ä»¶æŒ‚è½½åæ¸²æŸ“å­ç»„ä»¶ï¼Œå¦åˆ™è¿”å› null
 */
export default function NoSSR({children}: { children: React.ReactNode }) {
  // çŠ¶æ€æ ‡è®°ç»„ä»¶æ˜¯å¦å·²æŒ‚è½½
  const [mounted, setMounted] = useState(false)

  // ç»„ä»¶æŒ‚è½½åè®¾ç½® mounted ä¸º true
  useEffect(() => setMounted(true), [])

  // ä»…åœ¨æŒ‚è½½åæ¸²æŸ“å­ç»„ä»¶
  return mounted ? <>{children}</> : null
}